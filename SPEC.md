# 仕様書 (SPEC.md)

## 概要

本アプリは、複数のトレーディングカード販売サイトから商品の価格情報を取得し、一覧表示・比較するWebアプリケーションである。

## 機能仕様

### 1. 商品検索機能

#### 入力
- キーワード（カード名、型番など）

#### 処理
- 対応する全サイトに対して並行して検索リクエストを送信
- 各サイトの検索結果ページをスクレイピング
- 商品情報を統一フォーマットに変換

#### 出力
- 商品一覧（サイト名、商品名、価格、在庫状況、商品URL）

### 2. 対応サイト

#### カードラッシュ (cardrush-bs.jp)
- 検索URL: `https://www.cardrush-bs.jp/product-list?keyword={keyword}`
- 価格形式: `1,780円(税込)`
- 在庫形式: `在庫数 3枚`

#### Tier One (tier-one.jp)
- 検索URL: `https://tier-one.jp/view/search?search_keyword={keyword}`
- 価格形式: `￥1,280（税込）`
- 在庫形式: `在庫数:3`

### 3. データ形式

#### 商品情報（統一フォーマット）
```json
{
  "site": "サイト名",
  "name": "商品名",
  "price": 1780,
  "price_text": "1,780円(税込)",
  "stock": 3,
  "stock_text": "在庫あり",
  "url": "商品ページURL"
}
```

### 4. API仕様

#### GET /api/search
商品を検索する

**パラメータ**
| 名前 | 型 | 必須 | 説明 |
|------|-----|------|------|
| keyword | string | Yes | 検索キーワード |

**レスポンス**
```json
{
  "keyword": "検索キーワード",
  "results": [
    {
      "site": "カードラッシュ",
      "items": [...]
    },
    {
      "site": "Tier One",
      "items": [...]
    }
  ],
  "total_count": 42
}
```

## 非機能要件

- レスポンス時間: 10秒以内
- 同時リクエスト: 各サイト1リクエストずつ（負荷軽減）
- エラーハンドリング: サイト障害時も他サイトの結果は表示
